{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>MotoRentCL</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Tu CSS personalizado -->
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>

<body>

    <nav class="navbar navbar-expand-lg fixed-top arreglo-navbar">
        <div class="container-fluid">
          <a class="navbar-brand d-flex align-items-center logo-text m-0" href="{% url 'index' %}">
            <img src="{% static 'img/moto-icon.png' %}" alt="Logo Moto" class="logo-moto me-1">
            <span class="moto">Moto</span>
            <span class="rent">Rent</span>
            <span class="cl-c">C</span><span class="cl-l">L</span>
          </a>
        <!-- Botones a la derecha -->
        <div class="ms-auto d-flex gap-3 align-items-center">
          <a href="{% url 'arrendar' %}" class="nav-link boton-arrendar">üèçÔ∏èAlquilarüèçÔ∏è</a>
          <a href="{% url 'registro' %}" class="btn btn-outline-light">Registro</a>
          <a href="{% url 'login' %}" class="btn btn-light text-dark">Login</a>
          <a href="{% url 'contacto' %}" class="nav-link text-white">Contacto</a>
    
          
        </div>
        
      </div>
    </nav>

    {% block content %}
<!-- moto de entrada -->
<section class="bg-light py-5 text-center">
  <div class="container">
    <div id="moto-screen">
      <img src="{% static 'img/moto-animada2.png' %}" alt="Moto animada" class="moto-entrada2">
    </div>
  </div>
</section>

<!-- Filtros -->
<section class="container my-4">
  <form method="get" class="row g-3 align-items-end">
    <div class="col-12 col-md-4">
      <label for="filtro-marca" class="form-label">Marca</label>
      <select name="marca" id="filtro-marca" class="form-select">
        <option value="">Todas</option>
        {% for marca in marcas %}
          <option value="{{ marca }}" {% if request.GET.marca == marca %}selected{% endif %}>{{ marca }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-12 col-md-4">
      <label for="filtro-estilo" class="form-label">Estilo</label>
      <select name="estilo" id="filtro-estilo" class="form-select">
        <option value="">Todos</option>
        {% for estilo in estilos %}
          <option value="{{ estilo }}" {% if request.GET.estilo == estilo %}selected{% endif %}>{{ estilo }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-12 col-md-4">
      <label for="orden-precio" class="form-label">Ordenar precio</label>
      <select name="orden" id="orden-precio" class="form-select">
        <option value="">Por defecto</option>
        <option value="asc" {% if request.GET.orden == 'asc' %}selected{% endif %}>Menor ‚Üí Mayor</option>
        <option value="desc" {% if request.GET.orden == 'desc' %}selected{% endif %}>Mayor ‚Üí Menor</option>
      </select>
    </div>
    <div class="col-12 text-end">
      <button type="submit" class="btn btn-primary">Filtrar</button>
      <a href="{% url 'arrendar' %}" class="btn btn-secondary">Limpiar</a>
    </div>
  </form>
</section>

<section class="container my-5">
  <h2 class="text-center mb-4">Motocicletas disponibles</h2>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">

    {% if motocicletas %}
      {% for moto in motocicletas %}
        <div class="col">
          <!-- Enlace que activa el modal -->
          <a href="#" data-bs-toggle="modal" data-bs-target="#modalMoto{{ forloop.counter0 }}" class="text-decoration-none">
            <div class="card moto-card text-white position-relative">
              <div class="franja-celeste"></div>
              <img src="{% static 'img/motos/' %}{{ moto.model|slugify }}.png"
                   class="full-img2"
                   alt="{{ moto.model }}">
              {% load humanize %}
              <div class="card-img-overlay d-flex flex-column justify-content-start p-2">
                <h5 class="card-title bg-dark bg-opacity-75 px-2 py-1 rounded">
                  {{ moto.model }}<br>
                  $ {{ moto.precio|floatformat:0 }} CLP/d√≠a
                </h5>
              </div>
            </div>
          </a>

          <!-- Modal -->
          <div class="modal fade" id="modalMoto{{ forloop.counter0 }}" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content custom-modal">
                <div class="modal-header custom-header">
                  <h5 class="modal-title">{{ moto.make }} {{ moto.model }}</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body row custom-body">
                  <div class="col-md-6">
                    <img src="{% static 'img/motos/' %}{{ moto.model|slugify }}.png"
                         class="img-fluid rounded"
                         alt="{{ moto.model }}">
                  </div>
                  <div class="col-md-6">
                    <p><strong>A√±o:</strong> {{ moto.year }}</p>
                    <p><strong>Potencia:</strong> {{ moto.power|default:"No Especificada" }}</p>
                    <p><strong>Transmisi√≥n:</strong> {{ moto.gearbox }}</p>
                    <p><strong>Refrigeraci√≥n:</strong> {{ moto.cooling }}</p>
                    <p><strong>Precio:</strong> ${{ moto.precio|floatformat:0 }} CLP por d√≠a</p>
                    <div class="d-flex gap-2 mt-4">
                      <button class="btn btn-success">¬°La quiero!</button>
                      <button class="btn btn-secondary" data-bs-dismiss="modal">Seguir buscando</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
      {% else %}
      <div class="d-flex justify-content-center align-items-center" style="height: 300px; width: 100%;">
        <div class="text-center p-4 border rounded bg-light shadow">
          <h5>No hay motocicletas para estos filtros</h5>
          <p>Intenta con otros criterios</p>
          <a href="{% url 'arrendar' %}" class="btn btn-outline-primary mt-2">Limpiar filtros</a>
        </div>
      </div>
    {% endif %}

  </div>
</section>


{% endblock %}
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <footer class="bg-dark text-white text-center py-3">
     <p class="mb-0">&copy; 2025 MotoRentCL - Todos los derechos reservados </p>
  </footer>

</html>